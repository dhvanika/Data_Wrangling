## Open Socrata & Open Data
## Open Building Permits Evanston

s = https://data.cityofevanston.org/resource/nxfh-jnb7.json

## limits records
q = ?$limit=5

## query & limit
q = ?$query=SELECT permit_number,description,application_date,issued_date,completed_date,original_address_1,original_address_2,original_city,original_state,original_zip_code,permit_class,permit_class_mapped,status_current,status_current_mapped,work_class,work_class_mapped,permit_type,permit_type_mapped,permit_type_description,status_date,total_square_feet,link,estimated_porject_cost_dec,estimated_project_cost_text,housing_units,proposed_use,estimated_project_cost,project_name,added_square_feet,master_permit_number,expires_date,co_issued_date,hold_date,void_date,project_id,total_finished_square_feet,total_unfinished_square_feet,total_heated_square_feet,total_unheated_square_feet,total_acc_square_feet,total_sprinkler_square_feet,publisher,fee,last_updated,location_city,location,location_address,location_zip,location_state LIMIT 15

## query contractor & dedupe & is not null & where application_date & permit_type & permit_class_mapped 
q = ?$query=SELECT permit_number,description,application_date,issued_date,completed_date,original_address_1,original_address_2,original_city,original_state,original_zip_code,permit_class,permit_class_mapped,status_current,status_current_mapped,work_class,work_class_mapped,permit_type,permit_type_mapped,permit_type_description,status_date,total_square_feet,link,estimated_porject_cost_dec,estimated_project_cost_text,housing_units,proposed_use,estimated_project_cost,project_name,added_square_feet,master_permit_number,expires_date,co_issued_date,hold_date,void_date,project_id,total_finished_square_feet,total_unfinished_square_feet,total_heated_square_feet,total_unheated_square_feet,total_acc_square_feet,total_sprinkler_square_feet,publisher,fee,last_updated,location_city,location,location_address,location_zip,location_state WHERE application_date>="2018-08-01T00:00:00.000" AND application_date<"2018-09-01T00:00:00.000" AND permit_class_mapped NOT LIKE '%25Non-Residential%25' AND permit_type NOT LIKE '%25Demolition%25' AND permit_type NOT LIKE '%25Plumbing%25' AND permit_type NOT LIKE '%25Fence%25' ORDER BY permit_number

## adding HubSpot dealstage & pipeline
?$query=SELECT "Import","Sales Pipeline" LIMIT 15

## query contractor & dedupe & is not null & where application_date & permit_type & permit_class_mapped & adding HubSpot dealstage & pipeline
q = ?$query=SELECT "Import","Sales Pipeline",permit_number,description,application_date,issued_date,completed_date,original_address_1,original_address_2,original_city,original_state,original_zip_code,permit_class,permit_class_mapped,status_current,status_current_mapped,work_class,work_class_mapped,permit_type,permit_type_mapped,permit_type_description,status_date,total_square_feet,link,estimated_porject_cost_dec,estimated_project_cost_text,housing_units,proposed_use,estimated_project_cost,project_name,added_square_feet,master_permit_number,expires_date,co_issued_date,hold_date,void_date,project_id,total_finished_square_feet,total_unfinished_square_feet,total_heated_square_feet,total_unheated_square_feet,total_acc_square_feet,total_sprinkler_square_feet,publisher,fee,last_updated,location_city,location,location_address,location_zip,location_state WHERE application_date>="2018-08-01T00:00:00.000" AND application_date<"2018-09-01T00:00:00.000" AND permit_class_mapped NOT LIKE '%25Non-Residential%25' AND permit_type NOT LIKE '%25Demolition%25' AND permit_type NOT LIKE '%25Plumbing%25' AND permit_type NOT LIKE '%25Fence%25' ORDER BY permit_number

## query contractor & dedupe & is not null & where application_date & permit_type & permit_class_mapped & adding HubSpot dealstage & pipeline & date_trunc_ymd(...)
q = ?$query=SELECT "Import","Sales Pipeline",permit_number,description,date_trunc_ymd(application_date),date_trunc_ymd(issued_date),date_trunc_ymd(completed_date),original_address_1,original_address_2,original_city,original_state,original_zip_code,permit_class,permit_class_mapped,status_current,status_current_mapped,work_class,work_class_mapped,permit_type,permit_type_mapped,permit_type_description,date_trunc_ymd(status_date),total_square_feet,link,estimated_porject_cost_dec,estimated_project_cost_text,housing_units,proposed_use,estimated_project_cost,project_name,added_square_feet,master_permit_number,date_trunc_ymd(expires_date),date_trunc_ymd(co_issued_date),date_trunc_ymd(hold_date),date_trunc_ymd(void_date),project_id,total_finished_square_feet,total_unfinished_square_feet,total_heated_square_feet,total_unheated_square_feet,total_acc_square_feet,total_sprinkler_square_feet,publisher,fee,date_trunc_ymd(last_updated),location_city,location,location_address,location_zip,location_state WHERE application_date>="2018-08-01T00:00:00.000" AND application_date<"2018-09-01T00:00:00.000" AND permit_class_mapped NOT LIKE '%25Non-Residential%25' AND permit_type NOT LIKE '%25Demolition%25' AND permit_type NOT LIKE '%25Plumbing%25' AND permit_type NOT LIKE '%25Fence%25' ORDER BY permit_number

df=s+q

https://data.cityofevanston.org/resource/nxfh-jnb7.csv?$query=SELECT "Import","Sales Pipeline",permit_number,description,date_trunc_ymd(application_date),date_trunc_ymd(issued_date),date_trunc_ymd(completed_date),original_address_1,original_address_2,original_city,original_state,original_zip_code,permit_class,permit_class_mapped,status_current,status_current_mapped,work_class,work_class_mapped,permit_type,permit_type_mapped,permit_type_description,date_trunc_ymd(status_date),total_square_feet,link,estimated_porject_cost_dec,estimated_project_cost_text,housing_units,proposed_use,estimated_project_cost,project_name,added_square_feet,master_permit_number,date_trunc_ymd(expires_date),date_trunc_ymd(co_issued_date),date_trunc_ymd(hold_date),date_trunc_ymd(void_date),project_id,total_finished_square_feet,total_unfinished_square_feet,total_heated_square_feet,total_unheated_square_feet,total_acc_square_feet,total_sprinkler_square_feet,publisher,fee,date_trunc_ymd(last_updated),location_city,location,location_address,location_zip,location_state WHERE application_date>="2018-08-01T00:00:00.000" AND application_date<"2018-09-01T00:00:00.000" AND permit_class_mapped NOT LIKE '%25Non-Residential%25' AND permit_type NOT LIKE '%25Demolition%25' AND permit_type NOT LIKE '%25Plumbing%25' AND permit_type NOT LIKE '%25Fence%25' ORDER BY permit_number


?$query=SELECT "Import","Sales Pipeline",permit_number,description,application_date,issued_date,completed_date,original_address_1,original_address_2,original_city,original_state,original_zip_code,permit_class,permit_class_mapped,status_current,status_current_mapped,work_class,work_class_mapped,permit_type,permit_type_mapped,permit_type_description,status_date,total_square_feet,link,estimated_porject_cost_dec,estimated_project_cost_text,housing_units,proposed_use,estimated_project_cost,project_name,added_square_feet,master_permit_number,expires_date,co_issued_date,hold_date,void_date,project_id,total_finished_square_feet,total_unfinished_square_feet,total_heated_square_feet,total_unheated_square_feet,total_acc_square_feet,total_sprinkler_square_feet,publisher,fee,last_updated,location_city,location,location_address,location_zip,location_state WHERE application_date>="2018-08-01T00:00:00.000" AND application_date<"2018-09-01T00:00:00.000" AND permit_class_mapped NOT LIKE '%25Non-Residential%25' AND permit_type NOT LIKE '%25Demolition%25' AND permit_type NOT LIKE '%25Plumbing%25' AND permit_type NOT LIKE '%25Fence%25' ORDER BY permit_number
